# AI-CR æ™ºèƒ½ä»£ç å®¡æŸ¥å·¥å…·ä½¿ç”¨æŒ‡å—

## ğŸ¯ å·¥å…·ä»‹ç»

AI-CR æ˜¯ä¸€æ¬¾æ™ºèƒ½ä»£ç å®¡æŸ¥å·¥å…·ï¼ŒåŸºäºAIæŠ€æœ¯ï¼Œèƒ½å¤Ÿè‡ªåŠ¨åˆ†æä»£ç è´¨é‡ã€å‘ç°æ½œåœ¨é—®é¢˜å¹¶æä¾›æ”¹è¿›å»ºè®®ã€‚

### âœ¨ æ ¸å¿ƒç‰¹æ€§

- **æ™ºèƒ½åˆ†æ**ï¼šåŸºäº AI çš„æ·±åº¦ä»£ç åˆ†æï¼Œè¶…è¶Šä¼ ç»Ÿ ESLint è§„åˆ™
- **å¤šæ¨¡å¼å®¡æŸ¥**ï¼šæ”¯æŒé™æ€è§„åˆ™æ£€æŸ¥ã€AI å®¡æŸ¥ã€å®Œæ•´å®¡æŸ¥ä¸‰ç§æ¨¡å¼
- **é«˜æ€§èƒ½å¤„ç†**ï¼šæ”¯æŒå¹¶è¡Œå¤„ç†å’Œæ™ºèƒ½ç¼“å­˜ï¼Œå¤§å¹…æå‡å®¡æŸ¥é€Ÿåº¦
- **è¯¦ç»†æŠ¥å‘Š**ï¼šç”Ÿæˆ Markdown æ ¼å¼çš„è¯¦ç»†å®¡æŸ¥æŠ¥å‘Š
- **CI/CD é›†æˆ**ï¼šè½»æ¾é›†æˆåˆ°ç°æœ‰çš„å¼€å‘æµç¨‹ä¸­

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ­¥éª¤ 1ï¼šå®‰è£…å·¥å…·

#### å…¨å±€å®‰è£…ï¼ˆæ¨èï¼‰

```bash
npm install -g @asthestarslept/ai-cr
```

#### é¡¹ç›®çº§å®‰è£…

```bash
npm install --save-dev @asthestarslept/ai-cr
```

#### ä½¿ç”¨ npxï¼ˆæ— éœ€å®‰è£…ï¼‰

```bash
npx @asthestarslept/ai-cr
```

### æ­¥éª¤ 2ï¼šè·å– API Key

1. è®¿é—® [é˜¿é‡Œäº‘ç™¾ç‚¼](https://bailian.console.aliyun.com/#/home)
2. æ³¨å†Œæˆ–ç™»å½•é˜¿é‡Œäº‘è´¦å·
3. å¼€é€š DashScope æœåŠ¡
4. åˆ›å»º API Key
5. å¤åˆ¶ API Keyï¼Œæ ¼å¼ç±»ä¼¼ï¼š`sk-xxx...`

### æ­¥éª¤ 3ï¼šåˆå§‹åŒ–é…ç½®

é¦–æ¬¡ä½¿ç”¨éœ€è¦è¿›è¡Œåˆå§‹åŒ–é…ç½®ï¼š

```bash
npx @asthestarslept/ai-cr --init
```

åˆå§‹åŒ–è¿‡ç¨‹ä¼šå¼•å¯¼æ‚¨å®Œæˆä»¥ä¸‹é…ç½®ï¼š

1. **è¾“å…¥ API Key**ï¼šç²˜è´´ä»é˜¿é‡Œäº‘è·å–çš„ API Key
2. **é…ç½® API åœ°å€**ï¼šä½¿ç”¨é»˜è®¤åœ°å€æˆ–è‡ªå®šä¹‰
3. **é€‰æ‹©æ¨¡å‹**ï¼šæ¨èä½¿ç”¨ `qwen3-coder-plus`
4. **é…ç½®ç”¨æˆ·ä¿¡æ¯**ï¼šè¾“å…¥æ‚¨çš„çœŸå®å§“å
5. **é€‰æ‹©é¡¹ç›®ç»„**ï¼šä»åˆ—è¡¨ä¸­é€‰æ‹©æ‚¨çš„é¡¹ç›®ç»„

### æ­¥éª¤ 4ï¼šå¼€å§‹ä½¿ç”¨

é…ç½®å®Œæˆåï¼Œåœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œï¼š

```bash
npx @asthestarslept/ai-cr
```

ç³»ç»Ÿå°†è‡ªåŠ¨åˆ†ææ‚¨çš„ä»£ç å¹¶ç”Ÿæˆå®¡æŸ¥æŠ¥å‘Šã€‚

## ğŸ“‹ è¯¦ç»†é…ç½®è¯´æ˜

### é…ç½®æ–‡ä»¶ç»“æ„

AI-CR ä½¿ç”¨ä¸¤çº§é…ç½®ï¼š

1. **å…¨å±€é…ç½®**ï¼š`~/.ai-cr/config.json`ï¼ˆç”¨æˆ·çº§åˆ«ï¼‰
2. **é¡¹ç›®é…ç½®**ï¼š`.ai-cr.config.json`ï¼ˆé¡¹ç›®çº§åˆ«ï¼‰

### å…¨å±€é…ç½®ç¤ºä¾‹

```json
{
  "apiKey": "sk-your-api-key-here",
  "baseURL": "https://dashscope.aliyuncs.com/compatible-mode/v1",
  "model": "qwen3-coder-plus",
  "userInfo": {
    "id": "user123",
    "name": "å¼ ä¸‰",
    "email": "zhangsan@example.com"
  },
  "backendApi": {
    "baseUrl": "http://localhost:36788"
  },
  "created": "2024-01-01T00:00:00.000Z",
  "updated": "2024-01-01T00:00:00.000Z"
}
```

### é¡¹ç›®é…ç½®ç¤ºä¾‹

```json
{
  "project": {
    "projectGroupId": "group123",
    "projectGroupName": "å‰ç«¯å›¢é˜Ÿ",
    "projectName": "æˆ‘çš„å‰ç«¯é¡¹ç›®",
    "name": "my-frontend-project",
    "group": "å‰ç«¯å›¢é˜Ÿ",
    "mainBranch": "main",
    "developerName": "å¼ ä¸‰",
    "developerUserId": "user123"
  },
  "ai": {
    "temperature": 0.1,
    "maxTokens": 4000
  },
  "rules": {
    "enabled": ["quality", "security", "performance", "maintainability", "bestPractices"]
  },
  "created": "2024-01-01T00:00:00.000Z",
  "updated": "2024-01-01T00:00:00.000Z"
}
```

### ç¯å¢ƒå˜é‡é…ç½®

æ‚¨ä¹Ÿå¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡è¿›è¡Œé…ç½®ï¼š

```bash
# API é…ç½®
export DASHSCOPE_API_KEY=sk-your-api-key-here
export AI_CR_API_BASE_URL=http://localhost:36788

# æ€§èƒ½é…ç½®
export AI_CR_ENABLE_CACHE=true
export AI_CR_MAX_WORKERS=4

# ä¸Šä¸‹æ–‡é…ç½®
export MAX_TOKENS_PER_FILE=4000
export CONTEXT_STRATEGY=auto
```

## ğŸ’» ä½¿ç”¨æ–¹æ³•

### åŸºç¡€å‘½ä»¤

```bash
# åŸºæœ¬ä½¿ç”¨ï¼ˆå¯ä½¿ç”¨ä»¥ä¸‹ä»»æ„å‘½ä»¤ï¼‰
npx @asthestarslept/ai-cr
# æˆ–å…¨å±€å®‰è£…åç›´æ¥ä½¿ç”¨
ai-code-review
ai-cr
cr

# æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
ai-cr --help

# æŸ¥çœ‹ç‰ˆæœ¬
ai-cr --version
```

### å‘½ä»¤è¡Œå‚æ•°

```bash
# å¯ç”¨å¹¶è¡Œå¤„ç†ï¼ˆæ¨èï¼‰
ai-cr --parallel 4

# ç¦ç”¨ç¼“å­˜
ai-cr --no-cache

# æ˜¾ç¤ºè¯¦ç»†æ—¥å¿—
ai-cr --verbose

# æ˜¾ç¤ºæ€§èƒ½ç»Ÿè®¡
ai-cr --stats

# ä½¿ç”¨è‡ªå®šä¹‰é…ç½®æ–‡ä»¶
ai-cr --config ./custom-config.json

# ç»„åˆä½¿ç”¨
ai-cr --mode full --parallel 8 --stats --verbose
```

## ğŸ“Š æŠ¥å‘Šè§£è¯»

AI-CR ä¼šç”Ÿæˆè¯¦ç»†çš„ Markdown æ ¼å¼æŠ¥å‘Šï¼Œé€šå¸¸åŒ…å«ä»¥ä¸‹éƒ¨åˆ†ï¼š

### æŠ¥å‘Šç»“æ„

```markdown
# ä»£ç å®¡æŸ¥æŠ¥å‘Š

## ğŸ“‹ å®¡æŸ¥æ¦‚è§ˆ
- å®¡æŸ¥æ–‡ä»¶æ•°ï¼š15
- å‘ç°é—®é¢˜æ•°ï¼š8
- ä¸¥é‡ç¨‹åº¦åˆ†å¸ƒï¼šé”™è¯¯(2) è­¦å‘Š(4) å»ºè®®(2)

## ğŸ” è¯¦ç»†é—®é¢˜

### ğŸš¨ é”™è¯¯çº§åˆ«
1. **å®‰å…¨é—®é¢˜**: src/utils/auth.js:45
   - é—®é¢˜ï¼šä½¿ç”¨äº†ä¸å®‰å…¨çš„ localStorage å­˜å‚¨æ•æ„Ÿä¿¡æ¯
   - å»ºè®®ï¼šä½¿ç”¨åŠ å¯†å­˜å‚¨æˆ–æ”¹ç”¨å®‰å…¨çš„ cookie

### âš ï¸ è­¦å‘Šçº§åˆ«
1. **æ€§èƒ½é—®é¢˜**: src/components/List.jsx:12
   - é—®é¢˜ï¼šåœ¨æ¸²æŸ“å‡½æ•°ä¸­åˆ›å»ºæ–°å¯¹è±¡ï¼Œå¯èƒ½å¯¼è‡´ä¸å¿…è¦çš„é‡æ¸²æŸ“
   - å»ºè®®ï¼šå°†å¯¹è±¡æå–åˆ°ç»„ä»¶å¤–éƒ¨æˆ–ä½¿ç”¨ useMemo

## ğŸ’¡ æ”¹è¿›å»ºè®®
- ç»Ÿä¸€é”™è¯¯å¤„ç†æœºåˆ¶
- æ·»åŠ  TypeScript ç±»å‹å®šä¹‰
- ä¼˜åŒ–ç»„ä»¶æ¸²æŸ“æ€§èƒ½
```

### é—®é¢˜ç­‰çº§è¯´æ˜

- **ğŸš¨ é”™è¯¯**ï¼šå¿…é¡»ä¿®å¤çš„ä¸¥é‡é—®é¢˜ï¼ˆå®‰å…¨æ¼æ´ã€åŠŸèƒ½é”™è¯¯ï¼‰
- **âš ï¸ è­¦å‘Š**ï¼šå»ºè®®ä¿®å¤çš„é—®é¢˜ï¼ˆæ€§èƒ½é—®é¢˜ã€å¯ç»´æŠ¤æ€§ï¼‰
- **ğŸ’¡ å»ºè®®**ï¼šä¼˜åŒ–å»ºè®®ï¼ˆä»£ç é£æ ¼ã€æœ€ä½³å®è·µï¼‰

## ğŸ”§ å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

### Q1: API Key éªŒè¯å¤±è´¥

**é—®é¢˜**ï¼šæç¤º "API Keyæµ‹è¯•å¤±è´¥"

**è§£å†³æ–¹æ¡ˆ**ï¼š

1. ç¡®è®¤ API Key æ ¼å¼æ­£ç¡®ï¼ˆä»¥ `sk-` å¼€å¤´ï¼‰
2. æ£€æŸ¥é˜¿é‡Œäº‘è´¦æˆ·ä½™é¢å’ŒæœåŠ¡çŠ¶æ€
3. éªŒè¯ç½‘ç»œè¿æ¥å’Œé˜²ç«å¢™è®¾ç½®

```bash
# é‡æ–°åˆå§‹åŒ–é…ç½®
npx @asthestarslept/ai-cr --init

# æ£€æŸ¥ API è¿æ¥
curl -H "Authorization: Bearer YOUR_API_KEY" \
     https://dashscope.aliyuncs.com/compatible-mode/v1/models
```

### Q2: é…ç½®ä¸¢å¤±æˆ–æŸå

**é—®é¢˜**ï¼šé…ç½®æ–‡ä»¶ä¸å­˜åœ¨æˆ–æ ¼å¼é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š

```bash
# é‡ç½®å…¨å±€é…ç½®
rm -rf ~/.ai-cr/config.json
npx @asthestarslept/ai-cr --init-global

# é‡ç½®é¡¹ç›®é…ç½®
rm .ai-cr.config.json
npx @asthestarslept/ai-cr --init-project

# å®Œæ•´é‡æ–°åˆå§‹åŒ–
npx @asthestarslept/ai-cr --init
```

## ğŸ† æœ€ä½³å®è·µ

### å›¢é˜Ÿåä½œæµç¨‹

#### 1. Code Review æµç¨‹

```mermaid
graph LR
    A[å¼€å‘å®Œæˆ] --> B[æœ¬åœ°æ£€æŸ¥]
    B --> C{æ˜¯å¦é€šè¿‡?}
    C -->|å¦| D[ä¿®å¤é—®é¢˜]
    D --> B
    C -->|æ˜¯| E[æäº¤ä»£ç ]
    E --> F[CI è‡ªåŠ¨æ£€æŸ¥]
    F --> G{CI æ£€æŸ¥é€šè¿‡?}
    G -->|å¦| H[æŸ¥çœ‹æŠ¥å‘Š]
    H --> D
    G -->|æ˜¯| I[Code Review]
    I --> J[åˆå¹¶ä»£ç ]
```

### ä»£ç è´¨é‡æŒç»­æ”¹è¿›

#### 3. å›¢é˜ŸåŸ¹è®­

åŸºäº AI-CR å‘ç°çš„é—®é¢˜ï¼Œå®šæœŸç»„ç»‡å›¢é˜ŸåŸ¹è®­ï¼š

- **å®‰å…¨ç¼–ç **ï¼šé’ˆå¯¹å‘ç°çš„å®‰å…¨æ¼æ´
- **æ€§èƒ½ä¼˜åŒ–**ï¼šè§£å†³å¸¸è§çš„æ€§èƒ½é—®é¢˜
- **ä»£ç è§„èŒƒ**ï¼šç»Ÿä¸€å›¢é˜Ÿç¼–ç é£æ ¼
- **æœ€ä½³å®è·µ**ï¼šåˆ†äº« AI å»ºè®®çš„ä¼˜ç§€å®è·µ

## ğŸ“ æ”¯æŒä¸åé¦ˆ

### è·å–å¸®åŠ©

```bash
# æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯
npx @asthestarslept/ai-cr --help

# æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯
npx @asthestarslept/ai-cr --version

# æ£€æŸ¥é…ç½®çŠ¶æ€
npx @asthestarslept/ai-cr --verbose
```

### å¸¸ç”¨è¯Šæ–­å‘½ä»¤

```bash
# æ£€æŸ¥ API è¿æ¥
curl -H "Authorization: Bearer $DASHSCOPE_API_KEY" \
     https://dashscope.aliyuncs.com/compatible-mode/v1/models

# æŸ¥çœ‹é…ç½®æ–‡ä»¶
cat ~/.ai-cr/config.json
cat .ai-cr.config.json

# æ¸…ç†ç¼“å­˜
rm -rf ~/.ai-cr/cache

# é‡ç½®æ‰€æœ‰é…ç½®
rm -rf ~/.ai-cr
rm .ai-cr.config.json
npx @asthestarslept/ai-cr --init
```

### é—®é¢˜åé¦ˆ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š

1. **ç‰ˆæœ¬ä¿¡æ¯**ï¼š`npx @asthestarslept/ai-cr --version`
2. **é”™è¯¯æ—¥å¿—**ï¼š`npx @asthestarslept/ai-cr --verbose`
3. **é…ç½®ä¿¡æ¯**ï¼šè„±æ•åçš„é…ç½®æ–‡ä»¶
4. **ç¯å¢ƒä¿¡æ¯**ï¼šNode.js ç‰ˆæœ¬ã€æ“ä½œç³»ç»Ÿ
5. **å¤ç°æ­¥éª¤**ï¼šè¯¦ç»†çš„æ“ä½œæ­¥éª¤

---

## ğŸ‰ å¼€å§‹ä½¿ç”¨

ç°åœ¨æ‚¨å·²ç»æŒæ¡äº† AI-CR çš„å®Œæ•´ä½¿ç”¨æ–¹æ³•ï¼Œå¯ä»¥å¼€å§‹åœ¨é¡¹ç›®ä¸­ä½¿ç”¨äº†ï¼š

1. **å®‰è£…å·¥å…·**ï¼š`npm install -g @asthestarslept/ai-cr`
2. **åˆå§‹åŒ–é…ç½®**ï¼š`npx @asthestarslept/ai-cr --init`
3. **å¼€å§‹å®¡æŸ¥**ï¼š`npx @asthestarslept/ai-cr`
4. **æŸ¥çœ‹æŠ¥å‘Š**ï¼šæ£€æŸ¥ç”Ÿæˆçš„ Markdown æŠ¥å‘Š
5. **æŒç»­æ”¹è¿›**ï¼šæ ¹æ®å»ºè®®ä¼˜åŒ–ä»£ç è´¨é‡
